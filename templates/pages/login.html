{% extends "base.html" %}
{% block title %}Login - OptimalQuest{% endblock %}

{% block content %}
<div class="form-wrapper">
  <h2>Login</h2>

  <!-- Validation Message Section -->
  <div id="login-validation" class="validation-box"></div>

  <form id="loginForm" method="POST" action="{{ url_for('login') }}">
    <label for="username">Username</label>
    <input id="username" type="text" name="username" required placeholder="Enter username">

    <label for="password">Password</label>
    <input id="password" type="password" name="password" required placeholder="Enter password">

    <input type="hidden" name="next" value="{{ next_page }}">
    <button type="submit" class="btn login-btn" style="margin-left: 10px;">Login</button>
  </form>

  <p>Don't have an account? 
    <a href="{{ url_for('register') }}" class="no-underline">Register here</a>.
  </p>
</div>

<script>
document.getElementById('loginForm').addEventListener('submit', function(event) {
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();
  const validationBox = document.getElementById('login-validation');
  validationBox.innerHTML = '';
  
  if (!username || !password) {
    event.preventDefault();
    validationBox.innerHTML = '<div class="alert error">Please fill out all fields.</div>';
  }
});
</script>

{% endblock %}
